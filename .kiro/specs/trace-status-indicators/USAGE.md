# è¿½è¸ªç³»ç»ŸçŠ¶æ€æ ‡å¿—ä½¿ç”¨æŒ‡å—

## æ¦‚è¿°

è¿½è¸ªç³»ç»Ÿç°åœ¨æ”¯æŒçŠ¶æ€æ ‡å¿—åŠŸèƒ½ï¼Œå¯ä»¥åœ¨æ‰§è¡Œå†å²è¡¨æ ¼ä¸­æ˜¾ç¤ºæ¯ä¸ªæ“ä½œçš„çŠ¶æ€ï¼ˆæˆåŠŸâœ…ã€è­¦å‘Šâš ï¸ã€é”™è¯¯âŒã€ä¿¡æ¯â„¹ï¸ï¼‰ã€‚

## ä½¿ç”¨æ–¹å¼

### æ–¹å¼1ï¼šè‡ªåŠ¨æ¨æ–­ï¼ˆæ¨èï¼Œæ— éœ€ä¿®æ”¹ç°æœ‰ä»£ç ï¼‰

ç³»ç»Ÿä¼šæ ¹æ® `log_auto()` ä¸­çš„è¯´æ˜æ–‡å­—è‡ªåŠ¨æ¨æ–­çŠ¶æ€ï¼š

```python
from trace import log_auto

# è‡ªåŠ¨æ¨æ–­ä¸º success âœ…
log_auto("èµ„æºåŠ è½½æˆåŠŸ")
log_auto("åœ°å›¾ç”Ÿæˆå®Œæˆ")
log_auto("åˆå§‹åŒ–ç³»ç»Ÿ")

# è‡ªåŠ¨æ¨æ–­ä¸º error âŒ
log_auto("é”™è¯¯ï¼šæ— æ³•è¿æ¥")
log_auto("èµ„æºåŠ è½½å¤±è´¥")

# è‡ªåŠ¨æ¨æ–­ä¸º warning âš ï¸
log_auto("è­¦å‘Šï¼šæ–‡ä»¶æœªæ‰¾åˆ°")
log_auto("è·³è¿‡å¯é€‰æ­¥éª¤")

# è‡ªåŠ¨æ¨æ–­ä¸º info â„¹ï¸ï¼ˆé»˜è®¤ï¼‰
log_auto("å¼€å§‹å¤„ç†æ•°æ®")
log_auto("æ£€æŸ¥é…ç½®")
```

### æ–¹å¼2ï¼šæ˜¾å¼æŒ‡å®šï¼ˆå¯é€‰ï¼Œæ›´ç²¾ç¡®ï¼‰

å¯ä»¥é€šè¿‡ `status` å‚æ•°æ˜¾å¼æŒ‡å®šçŠ¶æ€ï¼š

```python
from trace import log_auto

# æ˜¾å¼æŒ‡å®šçŠ¶æ€
log_auto("èµ„æºåŠ è½½æˆåŠŸ", status="success")
log_auto("é”™è¯¯ï¼šåŠ è½½å¤±è´¥", status="error")
log_auto("è­¦å‘Šï¼šé…ç½®ç¼ºå¤±", status="warning")
log_auto("å¼€å§‹åˆå§‹åŒ–", status="info")
```

**æ³¨æ„ï¼š** æ˜¾å¼æŒ‡å®šçš„ status ä¼˜å…ˆäºè‡ªåŠ¨æ¨æ–­ã€‚

## å…³é”®è¯åˆ—è¡¨

### æˆåŠŸå…³é”®è¯ï¼ˆè‡ªåŠ¨æ¨æ–­ä¸º âœ…ï¼‰
- æˆåŠŸ
- å®Œæˆ
- åˆ›å»º
- ç”Ÿæˆ
- ä¿å­˜
- éªŒè¯æˆåŠŸ
- æ”¾ç½®æˆåŠŸ
- é…ç½®
- åˆå§‹åŒ–

### é”™è¯¯å…³é”®è¯ï¼ˆè‡ªåŠ¨æ¨æ–­ä¸º âŒï¼‰
- é”™è¯¯
- å¤±è´¥
- å¼‚å¸¸

### è­¦å‘Šå…³é”®è¯ï¼ˆè‡ªåŠ¨æ¨æ–­ä¸º âš ï¸ï¼‰
- è­¦å‘Š
- è·³è¿‡
- æœªæ‰¾åˆ°

### é»˜è®¤ï¼ˆâ„¹ï¸ï¼‰
å¦‚æœè¯´æ˜æ–‡å­—ä¸åŒ…å«ä»»ä½•ç‰¹æ®Šå…³é”®è¯ï¼Œé»˜è®¤ä¸ºä¿¡æ¯çŠ¶æ€ã€‚

## ä¼˜å…ˆçº§è§„åˆ™

å½“è¯´æ˜æ–‡å­—åŒ…å«å¤šä¸ªå…³é”®è¯æ—¶ï¼ŒæŒ‰ä»¥ä¸‹ä¼˜å…ˆçº§åˆ¤æ–­ï¼š

1. **é”™è¯¯å…³é”®è¯** > è­¦å‘Šå…³é”®è¯ > æˆåŠŸå…³é”®è¯
2. **æ˜¾å¼ status å‚æ•°** > å…³é”®è¯æ¨æ–­

ç¤ºä¾‹ï¼š
```python
# "åŠ è½½å¤±è´¥" åŒ…å« "å¤±è´¥"ï¼ˆé”™è¯¯ï¼‰â†’ æ¨æ–­ä¸º error âŒ
log_auto("åŠ è½½å¤±è´¥")

# æ˜¾å¼æŒ‡å®šä¼˜å…ˆ
log_auto("èµ„æºåŠ è½½æˆåŠŸ", status="error")  # æ˜¾ç¤ºä¸º error âŒï¼Œè€Œä¸æ˜¯ success
```

## æ‰§è¡Œå†å²è¡¨æ ¼è¾“å‡ºç¤ºä¾‹

```
ğŸ“œ æ¨¡å—æ‰§è¡Œå†å²ï¼ˆå…± 5 æ¡ï¼ŒæŒ‰æ‰§è¡Œé¡ºåºï¼‰:
    åºå·  æ¨¡å—                    è¡Œå·    è¯´æ˜                         çŠ¶æ€    è€—æ—¶        æ€»å…±      
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      1.  level_manager.py        L15     LevelManageråˆå§‹åŒ–           âœ…      0ms         0ms
      2.  level_manager.py        L25     å¼€å§‹å‡†å¤‡Level                â„¹ï¸      5ms         5ms
      3.  room_builder.py         L30     èµ„æºåŠ è½½æˆåŠŸ: SM_Cube        âœ…      120ms       125ms
      4.  room_builder.py         L33     èµ„æºåŠ è½½å¤±è´¥: SM_Plane       âŒ      10ms        135ms
      5.  lighting_system.py      L44     è­¦å‘Šï¼šåŠ è½½SkyLightç±»å¤±è´¥     âš ï¸      50ms        185ms
```

## å‘åå…¼å®¹æ€§

- **æ—§ä»£ç æ— éœ€ä¿®æ”¹**ï¼šç°æœ‰çš„ `log_auto()` è°ƒç”¨ä¼šè‡ªåŠ¨æ¨æ–­çŠ¶æ€
- **æ—§æ—¥å¿—æ•°æ®**ï¼šè§£ææ—§æ ¼å¼çš„ TRACE æ ‡è®°æ—¶ï¼Œä¼šè‡ªåŠ¨ä»è¯´æ˜æ–‡å­—æ¨æ–­çŠ¶æ€
- **æ–°æ—§æ··åˆ**ï¼šå¯ä»¥åœ¨åŒä¸€ä¸ªé¡¹ç›®ä¸­æ··åˆä½¿ç”¨è‡ªåŠ¨æ¨æ–­å’Œæ˜¾å¼æŒ‡å®š

## TRACE æ ‡è®°æ ¼å¼

### æ–°æ ¼å¼ï¼ˆåŒ…å« statusï¼‰
```
[TRACE:module_name:line_number:timestamp_ms:status] context
```

ç¤ºä¾‹ï¼š
```
[TRACE:room_builder:30:2450:success] èµ„æºåŠ è½½æˆåŠŸ
[TRACE:level_manager:45:3000:error] é”™è¯¯ï¼šåŠ è½½å¤±è´¥
```

### æ—§æ ¼å¼ï¼ˆå‘åå…¼å®¹ï¼‰
```
[TRACE:module_name:line_number:timestamp_ms] context
```

è§£æå™¨ä¼šè‡ªåŠ¨ä» context æ¨æ–­ statusã€‚

## æœ€ä½³å®è·µ

1. **ä¼˜å…ˆä½¿ç”¨è‡ªåŠ¨æ¨æ–­**ï¼šåœ¨è¯´æ˜æ–‡å­—ä¸­ä½¿ç”¨æ¸…æ™°çš„å…³é”®è¯ï¼ˆå¦‚"æˆåŠŸ"ã€"å¤±è´¥"ã€"è­¦å‘Š"ï¼‰
2. **å…³é”®æ“ä½œä½¿ç”¨æ˜¾å¼æŒ‡å®š**ï¼šå¯¹äºé‡è¦çš„æˆåŠŸ/å¤±è´¥åˆ¤æ–­ï¼Œå¯ä»¥æ˜¾å¼æŒ‡å®š status ç¡®ä¿å‡†ç¡®
3. **ä¿æŒè¯´æ˜æ–‡å­—æ¸…æ™°**ï¼šä½¿ç”¨æè¿°æ€§çš„è¯´æ˜æ–‡å­—ï¼Œä¾¿äºè‡ªåŠ¨æ¨æ–­å’Œäººå·¥é˜…è¯»
4. **éµå¾ªå‘½åçº¦å®š**ï¼š
   - æˆåŠŸæ“ä½œï¼šä½¿ç”¨"XXæˆåŠŸ"ã€"XXå®Œæˆ"
   - é”™è¯¯æ“ä½œï¼šä½¿ç”¨"é”™è¯¯ï¼šXX"ã€"XXå¤±è´¥"
   - è­¦å‘Šæ“ä½œï¼šä½¿ç”¨"è­¦å‘Šï¼šXX"

## ç¤ºä¾‹ä»£ç 

### å®Œæ•´ç¤ºä¾‹ï¼šèµ„æºåŠ è½½

```python
from trace import log_auto

def load_resources():
    log_auto("å¼€å§‹åŠ è½½èµ„æº")  # â„¹ï¸ info
    
    # åŠ è½½ç½‘æ ¼
    cube_mesh = load_asset("/Game/Meshes/SM_Cube")
    if cube_mesh:
        log_auto("èµ„æºåŠ è½½æˆåŠŸ: SM_Cube")  # âœ… success
    else:
        log_auto("èµ„æºåŠ è½½å¤±è´¥: SM_Cube")  # âŒ error
        return False
    
    # åŠ è½½å¯é€‰æè´¨
    optional_material = load_asset("/Game/Materials/Optional")
    if not optional_material:
        log_auto("è­¦å‘Šï¼šå¯é€‰æè´¨æœªæ‰¾åˆ°")  # âš ï¸ warning
    
    log_auto("èµ„æºåŠ è½½å®Œæˆ")  # âœ… success
    return True
```

### æ˜¾å¼æŒ‡å®šç¤ºä¾‹

```python
from trace import log_auto

def critical_operation():
    log_auto("å¼€å§‹å…³é”®æ“ä½œ", status="info")
    
    try:
        result = perform_operation()
        if result:
            log_auto("æ“ä½œæˆåŠŸ", status="success")
        else:
            log_auto("æ“ä½œå¤±è´¥", status="error")
    except Exception as e:
        log_auto(f"å¼‚å¸¸ï¼š{str(e)}", status="error")
```

## æ•…éšœæ’é™¤

### é—®é¢˜ï¼šçŠ¶æ€æ¨æ–­ä¸å‡†ç¡®

**è§£å†³æ–¹æ¡ˆï¼š**
1. æ£€æŸ¥è¯´æ˜æ–‡å­—æ˜¯å¦åŒ…å«å…³é”®è¯
2. ä½¿ç”¨æ˜¾å¼ status å‚æ•°
3. æ›´æ–°å…³é”®è¯åˆ—è¡¨ï¼ˆä¿®æ”¹ `trace.py` ä¸­çš„å¸¸é‡ï¼‰

### é—®é¢˜ï¼šæ—§æ—¥å¿—æ˜¾ç¤ºä¸æ­£ç¡®

**è§£å†³æ–¹æ¡ˆï¼š**
æ—§æ—¥å¿—ä¼šè‡ªåŠ¨ä» context æ¨æ–­çŠ¶æ€ã€‚å¦‚æœæ¨æ–­ä¸å‡†ç¡®ï¼Œè¯´æ˜ context æ–‡å­—ä¸åŒ…å«å…³é”®è¯ã€‚è¿™æ˜¯æ­£å¸¸çš„ï¼Œä¸å½±å“æ–°æ—¥å¿—ã€‚

### é—®é¢˜ï¼šè¡¨æ ¼å¯¹é½é—®é¢˜

**è§£å†³æ–¹æ¡ˆï¼š**
çŠ¶æ€åˆ—å®½åº¦å›ºå®šä¸º 6 ä¸ªå­—ç¬¦ã€‚å¦‚æœå‡ºç°å¯¹é½é—®é¢˜ï¼Œå¯èƒ½æ˜¯ç»ˆç«¯å­—ä½“ä¸æ”¯æŒè¡¨æƒ…ç¬¦å·ã€‚å»ºè®®ä½¿ç”¨æ”¯æŒ Unicode çš„ç»ˆç«¯ã€‚

## æŠ€æœ¯ç»†èŠ‚

- **çŠ¶æ€æ¨æ–­å‡½æ•°**ï¼š`infer_status(context)` in `trace.py`
- **çŠ¶æ€å›¾æ ‡æ˜ å°„**ï¼š`get_status_icon(status)` in `result_analyzer.py`
- **è§£æå™¨**ï¼š`_parse_trace_marker()` in `trace_parser.py`
- **æ˜¾ç¤ºå‡½æ•°**ï¼š`print_trace_history()` in `result_analyzer.py`

## ç›¸å…³æ–‡æ¡£

- [éœ€æ±‚æ–‡æ¡£](requirements.md)
- [è®¾è®¡æ–‡æ¡£](design.md)
- [ä»»åŠ¡åˆ—è¡¨](tasks.md)
- [å…³é”®è¯åˆ†æ](keyword-analysis.md)
